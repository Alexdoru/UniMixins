/** The root of the build. Exposed for flexibility, but you shouldn't edit it
	unless you have to. Edit project.gradle instead. */

buildscript {
	repositories {
		mavenCentral()
		maven {
			name = "forge"
			url = "https://maven.minecraftforge.net/"
		}
		maven {
			url = "https://jitpack.io"
		}
	}
	dependencies {
		classpath 'com.github.GTNewHorizons:ForgeGradle:1.2.11'
	}
}

plugins {
	id 'com.github.johnrengelman.shadow' version '6.1.0' apply false
}

allprojects {
	apply plugin: 'com.github.johnrengelman.shadow'
	// For some reason this is needed when using Gradle 6.9 (but not if using 4.4.1)
	repositories {
		maven {
			name 'Overmind forge repo mirror'
			url 'https://gregtech.overminddl1.com/'
		}
	}
	
	apply from: "${project.rootDir}/buildscript/forge-1.7.gradle"
	
	task sourcesJar(type: Jar) {
		from sourceSets.main.allSource
		//from (file("$projectDir/LICENSE"))
		classifier = 'sources'
	}

	artifacts {
		archives sourcesJar
	}

	// Put license, credits and readme in jar

	delete "$projectDir/build/tmp/license"

	copy {
		from "$projectDir"
		into "$projectDir/build/tmp/license"
		include "CREDITS", "LICENSE", "README*"
	}
	
	sourceSets.main.resources.srcDir("build/tmp/license")
}
